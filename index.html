<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>나의 웹사이트</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main>
        <h1>환영합니다</h1>
        <p>제 첫 웹페이지입니다.</p>
        <div class="visitor-counter">
            <p>총 방문자 수: <span id="visitor-count">0</span>명</p>
        </div>
    </main>

    <script type="module">
        // Firebase SDK 임포트
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, get, set } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        // Firebase 구성 정보
        const firebaseConfig = {
            apiKey: "AIzaSyCmKHVd8cd2N3LA_HRLUQVtsxFc-4s-LcY",
            authDomain: "reco-2e3bb.firebaseapp.com",
            projectId: "reco-2e3bb",
            storageBucket: "reco-2e3bb.firebasestorage.app",
            messagingSenderId: "457666532666",
            appId: "1:457666532666:web:8c1c9694e2ab952cb56c03",
            measurementId: "G-4YJMLVFD17"
        };

        // Firebase 초기화
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const visitorCountRef = ref(database, 'visitorCount');

        // 방문자 수 업데이트 함수
        async function updateVisitorCount() {
            try {
                const snapshot = await get(visitorCountRef);
                let count = snapshot.exists() ? snapshot.val() : 0;
                count++;
                
                await set(visitorCountRef, count);
                document.getElementById('visitor-count').textContent = count;
            } catch (error) {
                console.error('Error updating visitor count:', error);
            }
        }

        // 페이지 로드 시 방문자 수 업데이트
        updateVisitorCount();
    </script>
</body>
</html>